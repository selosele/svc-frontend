<h2 class="mt-2 mb-4 pb-4 border-bottom-1 border-gray-300">
  {{ title }}
</h2>

<ui-form [form]="payslipForm" (submit)="onSubmit($event)">
  <div class="ui-basic-table type1">
    <table>
      <caption>급여명세서 기본 정보</caption>
      <colgroup>
        <col style="width: 25%;">
        <col style="width: 25%;">
        <col style="width: 25%;">
        <col style="width: 25%;">
      </colgroup>
      <tbody>
        <tr>
          <th scope="row">성명</th>
          <td>{{ user?.employeeName }}</td>
          <th scope="row">입사일자</th>
          <td>{{ joinYmd }}</td>
        </tr>
        <tr>
          <th scope="row">직위</th>
          <td>
            <ui-dropdown
              [control]="payslipForm.get('rankCode')"
              [data]="rankCodes"
            />
          </td>
          <th scope="row">급여지급일</th>
          <td>
            <ui-date-field
              [control]="payslipForm.get('payslipPaymentYmd')"
              [dateFormat]="'yy-mm-dd'"
              [placeholder]="'예) 2024-03-01'"
              [showErrorMessage]="false"
              (select)="onPayslipPaymentYmdChange($event)"
              (clear)="onPayslipPaymentYmdChange()"
              (clearClick)="onPayslipPaymentYmdChange()"
            />
          </td>
        </tr>
        <tr>
          <th scope="row">비고</th>
          <td colspan="3">
            <ui-textarea
              [control]="payslipForm.get('payslipNote')"
            />
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="flex">
    <div class="ui-basic-table type2 flex-grow-1 mt-4">
      <table>
        <caption>급여명세서 세부 내역 - 지급(지급내역, 지급액)</caption>
        <colgroup>
          <col style="width: 50%;">
          <col style="width: 50%;">
        </colgroup>
        <thead>
          <tr>
            <th scope="col" colspan="2">지급</th>
          </tr>
          <tr>
            <th scope="col">{{ salaryTypeA00code.label }}</th>
            <th scope="col">지급액</th>
          </tr>
        </thead>
        <tbody>
          @for (i of salaryAmountA00Codes; track $index) {
            <tr>
              <th scope="row">{{ i.label }}</th>
              <td>
                <ui-text-field
                  [align]="'right'"
                  [control]="getPayslipSalaryDetailControl(i.value, 'salaryAmount')"
                  (input)="onSalaryAmountChange($event, i.value, 'salaryAmount')"
                />
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <div class="ui-basic-table type2 flex-grow-1 mt-4">
      <table>
        <caption>급여명세서 세부 내역 - 공제(공제내역, 공제액)</caption>
        <colgroup>
          <col style="width: 50%;">
          <col style="width: 50%;">
        </colgroup>
        <thead>
          <tr>
            <th scope="col" colspan="2">공제</th>
          </tr>
          <tr>
            <th scope="col">{{ salaryTypeB00code.label }}</th>
            <th scope="col">공제액</th>
          </tr>
        </thead>
        <tbody>
          @for (i of salaryAmountB00Codes; track $index) {
            <tr>
              <th scope="row">{{ i.label }}</th>
              <td>
                <ui-text-field
                  [align]="'right'"
                  [control]="getPayslipSalaryDetailControl(i.value, 'salaryAmount')"
                  (input)="onSalaryAmountChange($event, i.value, 'salaryAmount')"
                />
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  @if (action === actions.UPDATE) {
    <ui-button button
      [text]="true"
      (click)="goToPayslip()"
    >
      뒤로가기
    </ui-button>
  }
</ui-form>