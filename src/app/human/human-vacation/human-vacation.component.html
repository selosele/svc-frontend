<layout-page-description>
  <ul>
    <li>회사별 휴가를 조회/입력할 수 있어요.</li>
    <li>회사 입력은 <a [routerLink]="'/hm/my-info'" [queryParams]="{ menuId: menuService.menuIdInfo.MY_PAGE }">마이페이지</a> &gt; 근무이력 정보에서 해주시면 돼요.</li>
  </ul>
</layout-page-description>

@if (!workHistoryListDataLoad) {
  <ui-skeleton />
  <ui-skeleton />
  <ui-skeleton />
}
@else {
  <ui-tab
    [tabs]="workHistoryTabList"
    [activeIndex]="activeIndex"
    (activeIndexChange)="onChange($event)"
  >
    <!-- <ng-container *ngIf="isNotQuit$ | async"> -->
      <ui-form [form]="caculateVacationForm" [useSubmit]="false" (submit)="onSubmit($event)">
        <div class="grid">
          <div class="col-fixed">
            <div class="input-box">
              <ui-dropdown
                [control]="caculateVacationForm.get('annualTypeCode')"
                [label]="'연차발생기준'"
                [data]="annualTypeCodes"
                (change)="onAnnualTypeCodeChange($event)"
              />
              
              <ui-text-field
                [control]="caculateVacationForm.get('joinYmd')"
                [label]="'입사일자'"
                [readonly]="true"
              />
              
              @if (caculateVacationForm.get('quitYmd').value) {
                <ui-text-field
                  [control]="caculateVacationForm.get('quitYmd')"
                  [label]="'퇴사일자'"
                  [readonly]="true"
                />
              }
            </div>
          </div>
        </div>

        <ui-checkbox-group [label]="'휴가 계산에 포함할 휴가를 선택:'">
          <div class="grid">
            <div class="col">
              <ui-card>
                <ui-checkbox-list>
                  @for (i of vacationTypeCodes; track $index) {
                    <ui-checkbox
                      [control]="caculateVacationForm.get('vacationTypeCodes')"
                      [label]="i.label"
                      [value]="i.value"
                      (change)="onSubmit($event)"
                    />
                  }
                </ui-checkbox-list>
              </ui-card>
            </div>
            
            <div class="col-fixed flex align-items-center">
              <ui-button
                [size]="'large'"
                [icon]="'pi-undo'"
                [severity]="'primary'"
                [title]="'기본 값으로 복원'"
                [text]="true"
                (click)="onReset()"
              />
            </div>

            <div class="col-fixed flex align-items-center">
              <ui-button
                [size]="'large'"
                [icon]="'pi-save'"
                [severity]="'success'"
                [title]="'휴가계산 설정 저장'"
                [text]="true"
                (click)="onSave()"
              />
            </div>
          </div>
        </ui-checkbox-group>
      </ui-form>
    <!-- </ng-container> -->

    <human-vacation-list
      [tableTitle]="vacationTableTitle"
      [tableText]="vacationTableText"
      (refresh)="onRefresh()"
    />
  </ui-tab>
}

<div class="mt-5">
  <ui-content-title [text]="'휴일관리'" />
  <view-my-holiday />
</div>